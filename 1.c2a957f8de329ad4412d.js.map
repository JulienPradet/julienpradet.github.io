{"version":3,"sources":["webpack:///1.c2a957f8de329ad4412d.js","webpack:///./src/content/posts/peau-neuve/index.js","webpack:///./src/site/Code.js?b418","webpack:///./src/content/posts/peau-neuve/createMatch.code","webpack:///./src/content/posts/peau-neuve/readPages.code","webpack:///./src/content/posts/peau-neuve/server.code","webpack:///./src/content/posts/peau-neuve/webpackServer.code","webpack:///./src/content/posts/peau-neuve/entrypoint1.md","webpack:///./src/content/posts/peau-neuve/entrypoint2.md","webpack:///./src/content/posts/peau-neuve/entrypoint3.md","webpack:///./src/content/posts/peau-neuve/introduction.md","webpack:///./src/content/posts/peau-neuve/performance.md","webpack:///./src/content/posts/peau-neuve/ssr1.md","webpack:///./src/content/posts/peau-neuve/ssr2.md","webpack:///./src/content/posts/peau-neuve/ssr3.md"],"names":["webpackJsonp","252","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_react","_react2","_Code","_Code2","_introduction","_introduction2","_entrypoint","_entrypoint2","_entrypoint3","_entrypoint4","_entrypoint5","_entrypoint6","_ssr","_ssr2","_ssr3","_ssr4","_ssr5","_ssr6","_performance","_performance2","_readPages","_readPages2","_createMatch","_createMatch2","_webpackServer","_webpackServer2","_server","_server2","Article","props","createElement","dangerouslySetInnerHTML","__html","254","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","i","length","descriptor","key","protoProps","staticProps","_reactHelmet","_reactHelmet2","Code","_React$Component","this","_this","getPrototypeOf","state","width","loadCss","updatePrintWidth","bind","window","addEventListener","removeEventListener","setState","Math","max","floor","min","code","offsetWidth","nextProps","nextState","lang","children","codeFormats","_this2","find","_ref","index","printWidth","_this3","className","ref","node","link","rel","href","getCode","Component","261","tabwidth","262","263","264","278","279","280","281","282","283","284","285"],"mappings":"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","file":"1.c2a957f8de329ad4412d.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 252:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Code = __webpack_require__(254);\n\nvar _Code2 = _interopRequireDefault(_Code);\n\nvar _introduction = __webpack_require__(281);\n\nvar _introduction2 = _interopRequireDefault(_introduction);\n\nvar _entrypoint = __webpack_require__(278);\n\nvar _entrypoint2 = _interopRequireDefault(_entrypoint);\n\nvar _entrypoint3 = __webpack_require__(279);\n\nvar _entrypoint4 = _interopRequireDefault(_entrypoint3);\n\nvar _entrypoint5 = __webpack_require__(280);\n\nvar _entrypoint6 = _interopRequireDefault(_entrypoint5);\n\nvar _ssr = __webpack_require__(283);\n\nvar _ssr2 = _interopRequireDefault(_ssr);\n\nvar _ssr3 = __webpack_require__(284);\n\nvar _ssr4 = _interopRequireDefault(_ssr3);\n\nvar _ssr5 = __webpack_require__(285);\n\nvar _ssr6 = _interopRequireDefault(_ssr5);\n\nvar _performance = __webpack_require__(282);\n\nvar _performance2 = _interopRequireDefault(_performance);\n\nvar _readPages = __webpack_require__(262);\n\nvar _readPages2 = _interopRequireDefault(_readPages);\n\nvar _createMatch = __webpack_require__(261);\n\nvar _createMatch2 = _interopRequireDefault(_createMatch);\n\nvar _webpackServer = __webpack_require__(264);\n\nvar _webpackServer2 = _interopRequireDefault(_webpackServer);\n\nvar _server = __webpack_require__(263);\n\nvar _server2 = _interopRequireDefault(_server);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Article = function Article(props) {\n  return _react2.default.createElement(\n    'div',\n    null,\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _introduction2.default } }),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _entrypoint2.default } }),\n    _react2.default.createElement(\n      _Code2.default,\n      null,\n      _readPages2.default\n    ),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _entrypoint4.default } }),\n    _react2.default.createElement(\n      _Code2.default,\n      null,\n      _createMatch2.default\n    ),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _entrypoint6.default } }),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _ssr2.default } }),\n    _react2.default.createElement(\n      _Code2.default,\n      null,\n      _webpackServer2.default\n    ),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _ssr4.default } }),\n    _react2.default.createElement(\n      _Code2.default,\n      null,\n      _server2.default\n    ),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _ssr6.default } }),\n    _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: _performance2.default } })\n  );\n};\n\nexports.default = Article;\n\n/***/ }),\n\n/***/ 254:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactHelmet = __webpack_require__(101);\n\nvar _reactHelmet2 = _interopRequireDefault(_reactHelmet);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Code = function (_React$Component) {\n  _inherits(Code, _React$Component);\n\n  function Code() {\n    _classCallCheck(this, Code);\n\n    var _this = _possibleConstructorReturn(this, (Code.__proto__ || Object.getPrototypeOf(Code)).call(this));\n\n    _this.state = {\n      width: 70,\n      loadCss: false\n    };\n    _this.updatePrintWidth = _this.updatePrintWidth.bind(_this);\n    return _this;\n  }\n\n  _createClass(Code, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      window.addEventListener('resize', this.updatePrintWidth);\n      this.updatePrintWidth();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      window.removeEventListener('resize', this.updatePrintWidth);\n    }\n  }, {\n    key: 'updatePrintWidth',\n    value: function updatePrintWidth() {\n      this.setState({\n        loadCss: true,\n        width: Math.max(40, Math.floor(Math.min(600, this.code.offsetWidth) / 8.5))\n      });\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return this.props.lang !== nextProps.lang || this.props.children !== nextProps.children || this.state.width !== nextState.width || this.state.loadCss !== nextState.loadCss;\n    }\n  }, {\n    key: 'getCode',\n    value: function getCode(codeFormats) {\n      var _this2 = this;\n\n      return codeFormats.find(function (_ref, index) {\n        var printWidth = _ref.printWidth;\n        return printWidth <= _this2.state.width || index === codeFormats.length - 1;\n      }).code;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement(\n        'pre',\n        { className: 'language-' + (this.props.lang || 'jsx'), ref: function ref(node) {\n            _this3.code = node;\n          } },\n        this.state.loadCss && _react2.default.createElement(_reactHelmet2.default, { link: [{ rel: 'stylesheet', href: '/css/prism-onedark.css' }] }),\n        _react2.default.createElement('code', { dangerouslySetInnerHTML: { __html: this.getCode(this.props.children) } })\n      );\n    }\n  }]);\n\n  return Code;\n}(_react2.default.Component);\n\nexports.default = Code;\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token keyword\\\">const</span> createRouteFromPath <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`\\n    &lt;Route\\n      exact\\n      path=</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">\\n      component={require(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">)}\\n    />\\n  `</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token keyword\\\">const</span> createRouteFromPath <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`\\n    &lt;Route\\n      exact\\n      path=</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">\\n      component={require(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>\\n   pagePath\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">)}\\n    />\\n  `</span></span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n/***/ }),\n\n/***/ 262:\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// https://github.com/JulienPradet/blog-posts/blob/5fa44165595e9fdcf00a4dad1cf52ccfc7e046a2/src/generator/app/readPages.js</span>\\n<span class=\\\"token keyword\\\">const</span> readPages <span class=\\\"token operator\\\">=</span> path <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> fs\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readdir</span><span class=\\\"token punctuation\\\">(</span>path<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>files <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> files<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>filepath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stat</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> stats <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      filepath<span class=\\\"token punctuation\\\">,</span>\\n      isDirectory<span class=\\\"token punctuation\\\">:</span> stats<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isDirectory</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n        isDirectory <span class=\\\"token operator\\\">||</span> filepath<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">endsWith</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"index.js\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n        isDirectory <span class=\\\"token operator\\\">?</span> <span class=\\\"token function\\\">readPages</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">:</span> Observable<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">of</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// https://github.com/JulienPradet/blog-posts/blob/5fa44165595e9fdcf00a4dad1cf52ccfc7e046a2/src/generator/app/readPages.js</span>\\n<span class=\\\"token keyword\\\">const</span> readPages <span class=\\\"token operator\\\">=</span> path <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">return</span> fs\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readdir</span><span class=\\\"token punctuation\\\">(</span>path<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>files <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> files<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>filepath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stat</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> stats <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   filepath<span class=\\\"token punctuation\\\">,</span>\\n   isDirectory<span class=\\\"token punctuation\\\">:</span> stats<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isDirectory</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n    isDirectory <span class=\\\"token operator\\\">||</span>\\n     filepath<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">endsWith</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"index.js\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n    isDirectory\\n     <span class=\\\"token operator\\\">?</span> <span class=\\\"token function\\\">readPages</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n     <span class=\\\"token punctuation\\\">:</span> Observable<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">of</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n/***/ }),\n\n/***/ 263:\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token keyword\\\">const</span> renderPageToHtml <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> location <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> context <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> server <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>StaticRouter</span> <span class=\\\"token attr-name\\\">location</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>location<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">context</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>context<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>App</span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>StaticRouter</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> htmlContent <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>appWithAsyncComponents<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> head <span class=\\\"token operator\\\">=</span> Helmet<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rewind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> topHead <span class=\\\"token operator\\\">=</span> Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">keys</span><span class=\\\"token punctuation\\\">(</span>head<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> key <span class=\\\"token operator\\\">!==</span> <span class=\\\"token string\\\">\\\"script\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> head<span class=\\\"token punctuation\\\">[</span>key<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span> <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> __html<span class=\\\"token punctuation\\\">:</span> topHead <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>root<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> __html<span class=\\\"token punctuation\\\">:</span> html <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>script</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token function\\\">makeJsUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">key</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>key<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token keyword\\\">const</span> renderPageToHtml <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> location <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> context <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> server <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>StaticRouter</span>\\n    <span class=\\\"token attr-name\\\">location</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>location<span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token attr-name\\\">context</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>context<span class=\\\"token punctuation\\\">}</span></span>\\n   <span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>App</span> <span class=\\\"token punctuation\\\">/></span></span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>StaticRouter</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> htmlContent <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n   appWithAsyncComponents\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> head <span class=\\\"token operator\\\">=</span> Helmet<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rewind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> topHead <span class=\\\"token operator\\\">=</span> Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">keys</span><span class=\\\"token punctuation\\\">(</span>head<span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> key <span class=\\\"token operator\\\">!==</span> <span class=\\\"token string\\\">\\\"script\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> head<span class=\\\"token punctuation\\\">[</span>key<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span>\\n     <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span>\\n      __html<span class=\\\"token punctuation\\\">:</span> topHead\\n     <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n     <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span>\\n      <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>root<span class=\\\"token punctuation\\\">\\\"</span></span>\\n      <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span>\\n       __html<span class=\\\"token punctuation\\\">:</span> html\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span>\\n     <span class=\\\"token punctuation\\\">/></span></span>\\n     <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>script</span>\\n      <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token function\\\">makeJsUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span></span>\\n      <span class=\\\"token attr-name\\\">key</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>key<span class=\\\"token punctuation\\\">}</span></span>\\n     <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n/***/ }),\n\n/***/ 264:\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"module<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  entry<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    server<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"build/server.js\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"node\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  output<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    libraryTarget<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"commonjs2\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"module<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n entry<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n  server<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"build/server.js\\\"</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"node\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n output<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n  libraryTarget<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"commonjs2\\\"</span>\\n <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<h2 id=\\\"automatiser-lajout-des-pages\\\"><a class=\\\"header-anchor\\\" href=\\\"#automatiser-lajout-des-pages\\\" aria-hidden=\\\"true\\\">#</a> Automatiser l'ajout des pages</h2>\\n<p>C'est une technique que j'avais déjà mis en place sur <a href=\\\"\\\">Pigment-Store</a>. Le principe consiste à lire le système de fichier pour récupérer tous les fichiers qui nous intéressent. Dans mon cas, ce sont tous les fichiers <code>index.js</code> dans le dossier <code>src/content</code>. Ici encore, RxJS simplifie le travail.</p>\\n<p>Voici, par exemple, comment je récupère l'ensemble des pages :</p>\\n\"\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<p>Une fois que j'ai récupéré toutes les pages, il ne me reste qu'à transformer ces pages en <code>Route</code> ingérable par <code>react-router</code>.</p>\\n\"\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<p>Je peux ensuite créer entièrement mon point d'entrée en concaténant les différentes routes et en sauvegardant le tout dans un fichier temporaire. C'est ce fichier que je vais ensuite passer à webpack.</p>\\n<p>La génération du point d'entrée est vraiment très utile et pratique pour créer des outils qui améliorent notre quotidien. L'inconvénient cependant est que la lecture de la structure de l'application est cachée par l'outil. A utiliser avec précaution, donc.</p>\\n\"\n\n/***/ }),\n\n/***/ 281:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<p>Je vous présente mon nouveau blog !</p>\\n<blockquote>\\n<p>– Déjà ? Mais ça fait un mois que tu as ouvert ton blog, non ?!<br>\\n– Ouais et en plus tu as juste ajouté des icones en haut à gauche…</p>\\n</blockquote>\\n<p>En vrai, c'est un petit peu plus que ça. J'ai fait mon propre générateur de site statique. Pourquoi ? Parce que j'aime bien réinventer la roue. Mais aussi et surtout parce que j'avais besoin d'un petit peu plus que ce que me proposait <a href=\\\"\\\">Phenomic</a> (qui est au passage très pratique pour de vrais sites statiques).</p>\\n<p><em>Les étapes ne sont pas très détaillées parce que je parle plus de comment j'en suis arrivé là que de la solution technique. Cependant, si pour vous certains points mériteraient d'être approfondis, n'hésite pas à me suggérer une idée d'article :)</em></p>\\n<h2 id=\\\"quelles-contraintes\\\"><a class=\\\"header-anchor\\\" href=\\\"#quelles-contraintes\\\" aria-hidden=\\\"true\\\">#</a> Quelles contraintes ?</h2>\\n<p>Voici la liste des contraintes que je me suis fixé :</p>\\n<ul>\\n<li>Créer une nouvelle page doit être équivalent à créer un nouveau fichier</li>\\n<li>Les pages doivent être facilement crawlable pour le SEO</li>\\n<li>Des éléments complexes doivent pouvoir être mis au milieu des pages\\n<ul>\\n<li>Exemples de code responsive</li>\\n<li>Demos</li>\\n</ul>\\n</li>\\n<li>Le poids des pages et le temps de chargement doivent rester minimaux</li>\\n<li>Ecrire les pages en React (parce que c'est rigolo)</li>\\n<li>Apprendre plein de choses (parce que c'est rigolo aussi)</li>\\n</ul>\\n<p>Du coup, comment ça marche ?</p>\\n<h2 id=\\\"quelles-sont-les-etapes\\\"><a class=\\\"header-anchor\\\" href=\\\"#quelles-sont-les-etapes\\\" aria-hidden=\\\"true\\\">#</a> Quelles sont les étapes ?</h2>\\n<p>Une fois les contraintes connues, je me suis demandé comment j'aurais créé un site React sans me préoccupé de l'automatisation :</p>\\n<ol>\\n<li>Je crée un fichier JS qui sert de point d'entrée à React</li>\\n<li>J'ajoute une par une chaque page à ce fichier</li>\\n<li>Je le transforme en bundle via webpack</li>\\n<li>Je récupère le contenu de chaque page pour faire mes fichiers HTML</li>\\n<li>J'ajoute les autres éléments statiques (images, css, etc.)</li>\\n</ol>\\n<p>Cela m'a permis d'une part de voir quels seraient mes jalons pour ne pas avoir le syndrome de la page blanche. D'autre part j'ai pu identifier quels points seraient important à automatiser et qu'est ce que je pourrais reprendre d'autres projets :</p>\\n<ul>\\n<li>L'ajout des pages au point d'entrée doit être automatisé</li>\\n<li>La transformation en contenus HTML est en fait du <abbr title=\\\"Server Side Rendering\\\">SSR</abbr> que je peux récupérer d'ailleurs</li>\\n</ul>\\n<p>Par ailleurs, pour gérer l'enchaînement des étapes, j'ai choisi d'utiliser <a href=\\\"\\\">RxJS</a> qui brille pour ce cas d'usage. D'ailleurs, entre temps, il y a <a href=\\\"https://strongloop.com/strongblog/lets-code-it-static-site-generator-with-rx-js/\\\">cet article très intéressant qui est sorti</a> qui parle d'à peu près la même chose.</p>\\n\"\n\n/***/ }),\n\n/***/ 282:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<h2 id=\\\"optimisations\\\"><a class=\\\"header-anchor\\\" href=\\\"#optimisations\\\" aria-hidden=\\\"true\\\">#</a> Optimisations</h2>\\n<p>Le problème de vouloir faire une appli en React pour un blog, c'est que nécessairement, c'est plus lourd qu'une bête page HTML. J'ai donc du faire des efforts pour améliorer tout ça.</p>\\n<h3 id=\\\"ameliorer-le-premier-affichage-de-la-page\\\"><a class=\\\"header-anchor\\\" href=\\\"#ameliorer-le-premier-affichage-de-la-page\\\" aria-hidden=\\\"true\\\">#</a> Améliorer le premier affichage de la page</h3>\\n<p>La première chose à faire sur ce point est de décaler le chargement de tout ce qui n'est pas nécessaire. Notamment, lorsqu'il s'agit d'une application React, c'est de décaler le chargement des <code>scripts</code>. Pour ce faire, il suffit d'ajouter l'attribut <code>async</code> (ou <code>defer</code> selon votre besoin) sur vos balises, et c'est gagné.</p>\\n<p>Je suis passé de 200ms à 120ms sur une page complexe avec beaucoup d'exemples de code.</p>\\n<h3 id=\\\"\\\"><a class=\\\"header-anchor\\\" href=\\\"#\\\" aria-hidden=\\\"true\\\">#</a> </h3>\\n\"\n\n/***/ }),\n\n/***/ 283:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<h2 id=\\\"creation-des-pages-html\\\"><a class=\\\"header-anchor\\\" href=\\\"#creation-des-pages-html\\\" aria-hidden=\\\"true\\\">#</a> Création des pages HTML</h2>\\n<p>Maintenant que j'ai automatisé la création de mon point d'entrée, je vais pouvoir automatiser la création de mes pages HTML. L'idée va être d'utiliser les mêmes techniques que pour le Server Side Rendering (SSR), mais de directement faire le rendu d'une page, plutôt que d'attendre la requête d'un utilisateur.</p>\\n<p>Pour faire du SSR, on fait appel à la fonction <code>renderToString</code> de React en lui passant le point d'entrée de notre application. Le problème, c'est que si on fait un <code>require</code> sur celui-ci, cela ne marche pas directement. En effet, j'utilise dans mon application des fonctionnalités qui ne sont pas compatibles avec l'environnement de node (ex : <code>import</code> de modules, import de fichiers <code>.md</code>, etc.). La solution est de compiler le point d'entrée avec webpack pour le rendre compatible avec node.</p>\\n\"\n\n/***/ }),\n\n/***/ 284:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<p>Dans mon point d'entrée, je peux alors faire le rendu de chacune des pages HTML en m'inspirant de ce qui est proposé dans <a href=\\\"https://reacttraining.com/react-router/#staticrouter\\\">la documentation de React Router</a>.</p>\\n<p>A noter tout de même que j'utilise en plus <a href=\\\"\\\">react-helmet</a> qui est une librairie qui prend en charge la gestion de tout ce qui est censé être dans le <code>head</code> d'une page HTML.</p>\\n\"\n\n/***/ }),\n\n/***/ 285:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<p>En ayant résolu ces deux points que sont la création automatique des pages et la création des HTMLs résultants, il ne reste plus qu'à s'occuper des fichiers statiques.</p>\\n<p>Au début, je voulais le faire avec webpack, mais finalement, c'était trop de complications pour rien. Je me suis donc contenté de faire un copié collé de mon répertoire où il y l'ensemble des fichiers publics dans le répertoire de <code>build</code>.</p>\\n\"\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.c2a957f8de329ad4412d.js","import React from 'react'\nimport Code from '../../../site/Code'\nimport introduction from './introduction.md'\nimport entrypoint1 from './entrypoint1.md'\nimport entrypoint2 from './entrypoint2.md'\nimport entrypoint3 from './entrypoint3.md'\nimport ssr1 from './ssr1.md'\nimport ssr2 from './ssr2.md'\nimport ssr3 from './ssr3.md'\nimport performance from './performance.md'\nimport readPagesCode from './readPages.code'\nimport createMatchCode from './createMatch.code'\nimport webpackServerCode from './webpackServer.code'\nimport serverCode from './server.code'\n\nconst Article = (props) => (\n  <div>\n    <div dangerouslySetInnerHTML={{__html: introduction}} />\n    <div dangerouslySetInnerHTML={{__html: entrypoint1}} />\n    <Code>{readPagesCode}</Code>\n    <div dangerouslySetInnerHTML={{__html: entrypoint2}} />\n    <Code>{createMatchCode}</Code>\n    <div dangerouslySetInnerHTML={{__html: entrypoint3}} />\n    <div dangerouslySetInnerHTML={{__html: ssr1}} />\n    <Code>{webpackServerCode}</Code>\n    <div dangerouslySetInnerHTML={{__html: ssr2}} />\n    <Code>{serverCode}</Code>\n    <div dangerouslySetInnerHTML={{__html: ssr3}} />\n    <div dangerouslySetInnerHTML={{__html: performance}} />\n  </div>\n)\n\nexport default Article\n\n\n\n// WEBPACK FOOTER //\n// ./src/content/posts/peau-neuve/index.js","import React from 'react'\nimport Helmet from 'react-helmet'\n\nclass Code extends React.Component {\n  constructor () {\n    super()\n    this.state = {\n      width: 70,\n      loadCss: false\n    }\n    this.updatePrintWidth = this.updatePrintWidth.bind(this)\n  }\n\n  componentDidMount () {\n    window.addEventListener('resize', this.updatePrintWidth)\n    this.updatePrintWidth()\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('resize', this.updatePrintWidth)\n  }\n\n  updatePrintWidth () {\n    this.setState({\n      loadCss: true,\n      width: Math.max(\n        40,\n        Math.floor(\n          Math.min(600, this.code.offsetWidth) / 8.5\n        )\n      )\n    })\n  }\n\n  shouldComponentUpdate (nextProps, nextState) {\n    return this.props.lang !== nextProps.lang ||\n      this.props.children !== nextProps.children ||\n      this.state.width !== nextState.width ||\n      this.state.loadCss !== nextState.loadCss\n  }\n\n  getCode (codeFormats) {\n    return codeFormats\n      .find(({printWidth}, index) => (\n        printWidth <= this.state.width || index === codeFormats.length - 1\n      ))\n      .code\n  }\n\n  render () {\n    return (\n      <pre className={`language-${this.props.lang || 'jsx'}`} ref={(node) => { this.code = node }}>\n        {this.state.loadCss && <Helmet link={[{rel: 'stylesheet', href: '/css/prism-onedark.css'}]} />}\n        <code dangerouslySetInnerHTML={{__html: this.getCode(this.props.children)}} />\n      </pre>\n    )\n  }\n}\n\nexport default Code\n\n\n\n// WEBPACK FOOTER //\n// ./src/site/Code.js","module.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token keyword\\\">const</span> createRouteFromPath <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`\\n    &lt;Route\\n      exact\\n      path=</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">\\n      component={require(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">)}\\n    />\\n  `</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token keyword\\\">const</span> createRouteFromPath <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token string\\\">`\\n    &lt;Route\\n      exact\\n      path=</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">\\n      component={require(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>JSON<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>\\n   pagePath\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">)}\\n    />\\n  `</span></span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/createMatch.code\n// module id = 261\n// module chunks = 1","module.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// https://github.com/JulienPradet/blog-posts/blob/5fa44165595e9fdcf00a4dad1cf52ccfc7e046a2/src/generator/app/readPages.js</span>\\n<span class=\\\"token keyword\\\">const</span> readPages <span class=\\\"token operator\\\">=</span> path <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> fs\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readdir</span><span class=\\\"token punctuation\\\">(</span>path<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>files <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> files<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>filepath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stat</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> stats <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      filepath<span class=\\\"token punctuation\\\">,</span>\\n      isDirectory<span class=\\\"token punctuation\\\">:</span> stats<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isDirectory</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n        isDirectory <span class=\\\"token operator\\\">||</span> filepath<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">endsWith</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"index.js\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n        isDirectory <span class=\\\"token operator\\\">?</span> <span class=\\\"token function\\\">readPages</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">:</span> Observable<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">of</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// https://github.com/JulienPradet/blog-posts/blob/5fa44165595e9fdcf00a4dad1cf52ccfc7e046a2/src/generator/app/readPages.js</span>\\n<span class=\\\"token keyword\\\">const</span> readPages <span class=\\\"token operator\\\">=</span> path <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n <span class=\\\"token keyword\\\">return</span> fs\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">readdir</span><span class=\\\"token punctuation\\\">(</span>path<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>files <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> files<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>filepath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> fs<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stat</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> stats <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n   filepath<span class=\\\"token punctuation\\\">,</span>\\n   isDirectory<span class=\\\"token punctuation\\\">:</span> stats<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">isDirectory</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n    isDirectory <span class=\\\"token operator\\\">||</span>\\n     filepath<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">endsWith</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"index.js\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">flatMap</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> filepath<span class=\\\"token punctuation\\\">,</span> isDirectory <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n    isDirectory\\n     <span class=\\\"token operator\\\">?</span> <span class=\\\"token function\\\">readPages</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n     <span class=\\\"token punctuation\\\">:</span> Observable<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">of</span><span class=\\\"token punctuation\\\">(</span>filepath<span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/readPages.code\n// module id = 262\n// module chunks = 1","module.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"<span class=\\\"token keyword\\\">const</span> renderPageToHtml <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> location <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> context <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> server <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>StaticRouter</span> <span class=\\\"token attr-name\\\">location</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>location<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">context</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>context<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>App</span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>StaticRouter</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> htmlContent <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>appWithAsyncComponents<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> head <span class=\\\"token operator\\\">=</span> Helmet<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rewind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> topHead <span class=\\\"token operator\\\">=</span> Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">keys</span><span class=\\\"token punctuation\\\">(</span>head<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> key <span class=\\\"token operator\\\">!==</span> <span class=\\\"token string\\\">\\\"script\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> head<span class=\\\"token punctuation\\\">[</span>key<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span> <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> __html<span class=\\\"token punctuation\\\">:</span> topHead <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>root<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> __html<span class=\\\"token punctuation\\\">:</span> html <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>script</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token function\\\">makeJsUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">key</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>key<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n      <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"<span class=\\\"token keyword\\\">const</span> renderPageToHtml <span class=\\\"token operator\\\">=</span> paths <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span>\\n pagePath <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">let</span> location <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">makeUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> context <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> server <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>StaticRouter</span>\\n    <span class=\\\"token attr-name\\\">location</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>location<span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token attr-name\\\">context</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>context<span class=\\\"token punctuation\\\">}</span></span>\\n   <span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>App</span> <span class=\\\"token punctuation\\\">/></span></span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>StaticRouter</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> htmlContent <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n   appWithAsyncComponents\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> head <span class=\\\"token operator\\\">=</span> Helmet<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">rewind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> topHead <span class=\\\"token operator\\\">=</span> Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">keys</span><span class=\\\"token punctuation\\\">(</span>head<span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">filter</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> key <span class=\\\"token operator\\\">!==</span> <span class=\\\"token string\\\">\\\"script\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>key <span class=\\\"token operator\\\">=</span><span class=\\\"token operator\\\">></span> head<span class=\\\"token punctuation\\\">[</span>key<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toString</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span>\\n   <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">renderToString</span><span class=\\\"token punctuation\\\">(</span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>head</span>\\n     <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span>\\n      __html<span class=\\\"token punctuation\\\">:</span> topHead\\n     <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n     <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span>\\n      <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>root<span class=\\\"token punctuation\\\">\\\"</span></span>\\n      <span class=\\\"token attr-name\\\">dangerouslySetInnerHTML</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span>\\n       __html<span class=\\\"token punctuation\\\">:</span> html\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span></span>\\n     <span class=\\\"token punctuation\\\">/></span></span>\\n     <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>script</span>\\n      <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token function\\\">makeJsUrl</span><span class=\\\"token punctuation\\\">(</span>pagePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span></span>\\n      <span class=\\\"token attr-name\\\">key</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>key<span class=\\\"token punctuation\\\">}</span></span>\\n     <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>body</span><span class=\\\"token punctuation\\\">></span></span>\\n   <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>html</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/server.code\n// module id = 263\n// module chunks = 1","module.exports = [{\"printWidth\":70,\"tabwidth\":2,\"code\":\"module<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  entry<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    server<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"build/server.js\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"node\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  output<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    libraryTarget<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"commonjs2\\\"</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"},{\"printWidth\":45,\"tabwidth\":1,\"code\":\"module<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n entry<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n  server<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"build/server.js\\\"</span>\\n <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n target<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"node\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n output<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n  libraryTarget<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"commonjs2\\\"</span>\\n <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/webpackServer.code\n// module id = 264\n// module chunks = 1","module.exports = \"<h2 id=\\\"automatiser-lajout-des-pages\\\"><a class=\\\"header-anchor\\\" href=\\\"#automatiser-lajout-des-pages\\\" aria-hidden=\\\"true\\\">#</a> Automatiser l'ajout des pages</h2>\\n<p>C'est une technique que j'avais déjà mis en place sur <a href=\\\"\\\">Pigment-Store</a>. Le principe consiste à lire le système de fichier pour récupérer tous les fichiers qui nous intéressent. Dans mon cas, ce sont tous les fichiers <code>index.js</code> dans le dossier <code>src/content</code>. Ici encore, RxJS simplifie le travail.</p>\\n<p>Voici, par exemple, comment je récupère l'ensemble des pages :</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/entrypoint1.md\n// module id = 278\n// module chunks = 1","module.exports = \"<p>Une fois que j'ai récupéré toutes les pages, il ne me reste qu'à transformer ces pages en <code>Route</code> ingérable par <code>react-router</code>.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/entrypoint2.md\n// module id = 279\n// module chunks = 1","module.exports = \"<p>Je peux ensuite créer entièrement mon point d'entrée en concaténant les différentes routes et en sauvegardant le tout dans un fichier temporaire. C'est ce fichier que je vais ensuite passer à webpack.</p>\\n<p>La génération du point d'entrée est vraiment très utile et pratique pour créer des outils qui améliorent notre quotidien. L'inconvénient cependant est que la lecture de la structure de l'application est cachée par l'outil. A utiliser avec précaution, donc.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/entrypoint3.md\n// module id = 280\n// module chunks = 1","module.exports = \"<p>Je vous présente mon nouveau blog !</p>\\n<blockquote>\\n<p>– Déjà ? Mais ça fait un mois que tu as ouvert ton blog, non ?!<br>\\n– Ouais et en plus tu as juste ajouté des icones en haut à gauche…</p>\\n</blockquote>\\n<p>En vrai, c'est un petit peu plus que ça. J'ai fait mon propre générateur de site statique. Pourquoi ? Parce que j'aime bien réinventer la roue. Mais aussi et surtout parce que j'avais besoin d'un petit peu plus que ce que me proposait <a href=\\\"\\\">Phenomic</a> (qui est au passage très pratique pour de vrais sites statiques).</p>\\n<p><em>Les étapes ne sont pas très détaillées parce que je parle plus de comment j'en suis arrivé là que de la solution technique. Cependant, si pour vous certains points mériteraient d'être approfondis, n'hésite pas à me suggérer une idée d'article :)</em></p>\\n<h2 id=\\\"quelles-contraintes\\\"><a class=\\\"header-anchor\\\" href=\\\"#quelles-contraintes\\\" aria-hidden=\\\"true\\\">#</a> Quelles contraintes ?</h2>\\n<p>Voici la liste des contraintes que je me suis fixé :</p>\\n<ul>\\n<li>Créer une nouvelle page doit être équivalent à créer un nouveau fichier</li>\\n<li>Les pages doivent être facilement crawlable pour le SEO</li>\\n<li>Des éléments complexes doivent pouvoir être mis au milieu des pages\\n<ul>\\n<li>Exemples de code responsive</li>\\n<li>Demos</li>\\n</ul>\\n</li>\\n<li>Le poids des pages et le temps de chargement doivent rester minimaux</li>\\n<li>Ecrire les pages en React (parce que c'est rigolo)</li>\\n<li>Apprendre plein de choses (parce que c'est rigolo aussi)</li>\\n</ul>\\n<p>Du coup, comment ça marche ?</p>\\n<h2 id=\\\"quelles-sont-les-etapes\\\"><a class=\\\"header-anchor\\\" href=\\\"#quelles-sont-les-etapes\\\" aria-hidden=\\\"true\\\">#</a> Quelles sont les étapes ?</h2>\\n<p>Une fois les contraintes connues, je me suis demandé comment j'aurais créé un site React sans me préoccupé de l'automatisation :</p>\\n<ol>\\n<li>Je crée un fichier JS qui sert de point d'entrée à React</li>\\n<li>J'ajoute une par une chaque page à ce fichier</li>\\n<li>Je le transforme en bundle via webpack</li>\\n<li>Je récupère le contenu de chaque page pour faire mes fichiers HTML</li>\\n<li>J'ajoute les autres éléments statiques (images, css, etc.)</li>\\n</ol>\\n<p>Cela m'a permis d'une part de voir quels seraient mes jalons pour ne pas avoir le syndrome de la page blanche. D'autre part j'ai pu identifier quels points seraient important à automatiser et qu'est ce que je pourrais reprendre d'autres projets :</p>\\n<ul>\\n<li>L'ajout des pages au point d'entrée doit être automatisé</li>\\n<li>La transformation en contenus HTML est en fait du <abbr title=\\\"Server Side Rendering\\\">SSR</abbr> que je peux récupérer d'ailleurs</li>\\n</ul>\\n<p>Par ailleurs, pour gérer l'enchaînement des étapes, j'ai choisi d'utiliser <a href=\\\"\\\">RxJS</a> qui brille pour ce cas d'usage. D'ailleurs, entre temps, il y a <a href=\\\"https://strongloop.com/strongblog/lets-code-it-static-site-generator-with-rx-js/\\\">cet article très intéressant qui est sorti</a> qui parle d'à peu près la même chose.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/introduction.md\n// module id = 281\n// module chunks = 1","module.exports = \"<h2 id=\\\"optimisations\\\"><a class=\\\"header-anchor\\\" href=\\\"#optimisations\\\" aria-hidden=\\\"true\\\">#</a> Optimisations</h2>\\n<p>Le problème de vouloir faire une appli en React pour un blog, c'est que nécessairement, c'est plus lourd qu'une bête page HTML. J'ai donc du faire des efforts pour améliorer tout ça.</p>\\n<h3 id=\\\"ameliorer-le-premier-affichage-de-la-page\\\"><a class=\\\"header-anchor\\\" href=\\\"#ameliorer-le-premier-affichage-de-la-page\\\" aria-hidden=\\\"true\\\">#</a> Améliorer le premier affichage de la page</h3>\\n<p>La première chose à faire sur ce point est de décaler le chargement de tout ce qui n'est pas nécessaire. Notamment, lorsqu'il s'agit d'une application React, c'est de décaler le chargement des <code>scripts</code>. Pour ce faire, il suffit d'ajouter l'attribut <code>async</code> (ou <code>defer</code> selon votre besoin) sur vos balises, et c'est gagné.</p>\\n<p>Je suis passé de 200ms à 120ms sur une page complexe avec beaucoup d'exemples de code.</p>\\n<h3 id=\\\"\\\"><a class=\\\"header-anchor\\\" href=\\\"#\\\" aria-hidden=\\\"true\\\">#</a> </h3>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/performance.md\n// module id = 282\n// module chunks = 1","module.exports = \"<h2 id=\\\"creation-des-pages-html\\\"><a class=\\\"header-anchor\\\" href=\\\"#creation-des-pages-html\\\" aria-hidden=\\\"true\\\">#</a> Création des pages HTML</h2>\\n<p>Maintenant que j'ai automatisé la création de mon point d'entrée, je vais pouvoir automatiser la création de mes pages HTML. L'idée va être d'utiliser les mêmes techniques que pour le Server Side Rendering (SSR), mais de directement faire le rendu d'une page, plutôt que d'attendre la requête d'un utilisateur.</p>\\n<p>Pour faire du SSR, on fait appel à la fonction <code>renderToString</code> de React en lui passant le point d'entrée de notre application. Le problème, c'est que si on fait un <code>require</code> sur celui-ci, cela ne marche pas directement. En effet, j'utilise dans mon application des fonctionnalités qui ne sont pas compatibles avec l'environnement de node (ex : <code>import</code> de modules, import de fichiers <code>.md</code>, etc.). La solution est de compiler le point d'entrée avec webpack pour le rendre compatible avec node.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/ssr1.md\n// module id = 283\n// module chunks = 1","module.exports = \"<p>Dans mon point d'entrée, je peux alors faire le rendu de chacune des pages HTML en m'inspirant de ce qui est proposé dans <a href=\\\"https://reacttraining.com/react-router/#staticrouter\\\">la documentation de React Router</a>.</p>\\n<p>A noter tout de même que j'utilise en plus <a href=\\\"\\\">react-helmet</a> qui est une librairie qui prend en charge la gestion de tout ce qui est censé être dans le <code>head</code> d'une page HTML.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/ssr2.md\n// module id = 284\n// module chunks = 1","module.exports = \"<p>En ayant résolu ces deux points que sont la création automatique des pages et la création des HTMLs résultants, il ne reste plus qu'à s'occuper des fichiers statiques.</p>\\n<p>Au début, je voulais le faire avec webpack, mais finalement, c'était trop de complications pour rien. Je me suis donc contenté de faire un copié collé de mon répertoire où il y l'ensemble des fichiers publics dans le répertoire de <code>build</code>.</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/posts/peau-neuve/ssr3.md\n// module id = 285\n// module chunks = 1"],"sourceRoot":""}